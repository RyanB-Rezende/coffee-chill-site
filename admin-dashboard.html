<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Dashboard Administrativo - Coffee & Chill</title>
  <link rel="stylesheet" href="css/sobre.css">
  <link rel="stylesheet" href="css/admin.css">
</head>
<body class="admin-dashboard">
  <!-- HEADER -->
  <header class="admin-header">
    <div class="admin-header-left">
      <h1 class="admin-header-title">‚òï Coffee & Chill Admin</h1>
    </div>
    <div class="admin-user-info">
      <span class="admin-username" id="adminUsername">Carregando...</span>
      <button class="btn-logout" id="btnLogout">Sair</button>
    </div>
  </header>

  <!-- NAVEGA√á√ÉO LATERAL -->
  <nav class="admin-nav">
    <ul class="admin-nav-list">
      <li class="admin-nav-item">
        <a href="#" class="admin-nav-link active" data-section="visao-geral">
          <span class="admin-nav-icon">üìä</span>
          <span>Vis√£o Geral</span>
        </a>
      </li>
      <li class="admin-nav-item">
        <a href="#" class="admin-nav-link" data-section="categorias">
          <span class="admin-nav-icon">üìÅ</span>
          <span>Categorias</span>
        </a>
      </li>
      <li class="admin-nav-item">
        <a href="#" class="admin-nav-link" data-section="itens">
          <span class="admin-nav-icon">‚òï</span>
          <span>Itens do Card√°pio</span>
        </a>
      </li>
      <li class="admin-nav-item">
        <a href="#" class="admin-nav-link" data-section="administradores">
          <span class="admin-nav-icon">üë•</span>
          <span>Administradores</span>
        </a>
      </li>
    </ul>
  </nav>

  <!-- CONTE√öDO PRINCIPAL -->
  <main class="admin-main">
    <!-- SE√á√ÉO: VIS√ÉO GERAL -->
    <section class="admin-section active" id="visao-geral">
      <div class="section-header">
        <h2 class="section-title">Vis√£o Geral</h2>
        <p class="section-description">Resumo das informa√ß√µes do sistema</p>
      </div>

      <div class="admin-cards-grid">
        <div class="admin-card">
          <div class="card-icon">üìÅ</div>
          <h3 class="card-title">Categorias</h3>
          <p class="card-value" id="totalCategorias">0</p>
        </div>

        <div class="admin-card">
          <div class="card-icon">‚òï</div>
          <h3 class="card-title">Itens no Card√°pio</h3>
          <p class="card-value" id="totalItens">0</p>
        </div>

        <div class="admin-card">
          <div class="card-icon">‚úÖ</div>
          <h3 class="card-title">Itens Dispon√≠veis</h3>
          <p class="card-value" id="totalDisponiveis">0</p>
        </div>

        <div class="admin-card">
          <div class="card-icon">‚≠ê</div>
          <h3 class="card-title">Itens em Destaque</h3>
          <p class="card-value" id="totalDestaques">0</p>
        </div>

        <div class="admin-card">
          <div class="card-icon">üë•</div>
          <h3 class="card-title">Administradores</h3>
          <p class="card-value" id="totalAdmins">0</p>
        </div>
      </div>
    </section>

    <!-- SE√á√ÉO: CATEGORIAS -->
    <section class="admin-section" id="categorias">
      <div class="section-header">
        <h2 class="section-title">Categorias do Card√°pio</h2>
        <p class="section-description">Gerencie as categorias dos produtos</p>
      </div>

      <button class="btn-primary" id="btnNovaCat" style="margin-bottom: 1.5rem;">
        ‚ûï Nova Categoria
      </button>

      <div class="admin-table-container">
        <table class="admin-table">
          <thead>
            <tr>
              <th>Nome</th>
              <th>Slug</th>
              <th>Descri√ß√£o</th>
              <th>A√ß√µes</th>
            </tr>
          </thead>
          <tbody id="tabelaCategorias">
            <tr>
              <td colspan="4" style="text-align: center; padding: 2rem;">
                Carregando categorias...
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </section>

    <!-- SE√á√ÉO: ITENS -->
    <section class="admin-section" id="itens">
      <div class="section-header">
        <h2 class="section-title">Itens do Card√°pio</h2>
        <p class="section-description">Gerencie os produtos dispon√≠veis</p>
      </div>

      <button class="btn-primary" id="btnNovoItem" style="margin-bottom: 1.5rem;">
        ‚ûï Novo Item
      </button>

      <div class="admin-table-container">
        <table class="admin-table">
          <thead>
            <tr>
              <th>Imagem</th>
              <th>Nome</th>
              <th>Categoria</th>
              <th>Pre√ßo</th>
              <th>Status</th>
              <th>Destaque</th>
                <th>Promo√ß√£o</th>
              <th>A√ß√µes</th>
            </tr>
          </thead>
          <tbody id="tabelaItens">
            <tr>
                <td colspan="8" style="text-align: center; padding: 2rem;">
                Carregando itens...
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </section>

    <!-- SE√á√ÉO: ADMINISTRADORES -->
    <section class="admin-section" id="administradores">
      <div class="section-header">
        <h2 class="section-title">Administradores do Sistema</h2>
        <p class="section-description">Gerencie os usu√°rios com acesso administrativo</p>
      </div>

      <button class="btn-primary" id="btnNovoAdmin" style="margin-bottom: 1.5rem;">
        ‚ûï Novo Administrador
      </button>

      <div class="admin-table-container">
        <table class="admin-table">
          <thead>
            <tr>
              <th>Nome</th>
              <th>E-mail</th>
              <th>Criado em</th>
              <th>√öltimo Login</th>
              <th>A√ß√µes</th>
            </tr>
          </thead>
          <tbody id="tabelaAdmins">
            <tr>
              <td colspan="5" style="text-align: center; padding: 2rem;">
                Carregando administradores...
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </section>
  </main>

  <!-- MODAL: CATEGORIA -->
  <div class="modal-overlay" id="modalCategoria">
    <div class="modal-content">
      <div class="modal-header">
        <h3 class="modal-title" id="modalCatTitle">Nova Categoria</h3>
        <button class="btn-close" id="btnCloseModalCat">√ó</button>
      </div>
      <div class="modal-body">
        <form id="formCategoria" class="modal-form">
          <input type="hidden" id="catId">
          
          <div class="form-group">
            <label for="catNome">Nome *</label>
            <input type="text" id="catNome" required placeholder="Ex: Caf√©s Quentes">
          </div>

          <div class="form-group">
            <label for="catSlug">Slug *</label>
            <input type="text" id="catSlug" required placeholder="Ex: cafes-quentes">
          </div>

          <div class="form-group">
            <label for="catDescricao">Descri√ß√£o</label>
            <textarea id="catDescricao" placeholder="Descri√ß√£o da categoria"></textarea>
          </div>
        </form>
      </div>
      <div class="modal-footer">
        <button class="btn-secondary" id="btnCancelCat">Cancelar</button>
        <button class="btn-primary" id="btnSaveCat">Salvar</button>
      </div>
    </div>
  </div>

  <!-- MODAL: ITEM -->
  <div class="modal-overlay" id="modalItem">
    <div class="modal-content">
      <div class="modal-header">
        <h3 class="modal-title" id="modalItemTitle">Novo Item</h3>
        <button class="btn-close" id="btnCloseModalItem">√ó</button>
      </div>
      <div class="modal-body">
        <form id="formItem" class="modal-form">
          <input type="hidden" id="itemId">
          
          <div class="form-group">
            <label for="itemNome">Nome *</label>
            <input type="text" id="itemNome" required placeholder="Ex: Cappuccino">
          </div>

          <div class="form-group">
            <label for="itemCategoria">Categoria *</label>
            <select id="itemCategoria" required>
              <option value="">Selecione...</option>
            </select>
          </div>

          <div class="form-row">
            <div class="form-group">
              <label for="itemPreco">Pre√ßo (R$) *</label>
              <input type="number" id="itemPreco" required step="0.01" min="0" placeholder="0.00">
            </div>

            <div class="form-group">
              <label for="itemDisponivel">Status</label>
              <select id="itemDisponivel">
                <option value="true">Dispon√≠vel</option>
                <option value="false">Indispon√≠vel</option>
              </select>
            </div>
          </div>

          <div class="form-group">
            <label for="itemDestaque">
              <input type="checkbox" id="itemDestaque" style="width: auto; margin-right: 0.5rem;">
              Item em destaque (aparece na p√°gina inicial)
            </label>
          </div>

          <div class="form-group">
            <label for="itemDescricao">Descri√ß√£o</label>
            <textarea id="itemDescricao" placeholder="Descri√ß√£o do item"></textarea>
          </div>

            <div class="form-group image-upload-container">
              <label for="itemImagem">Imagem</label>
              <img id="itemImagemPreview" class="image-preview" alt="Preview">
              <input type="file" id="itemImagem" accept="image/*">
            </div>
          </form>
        </div>
        <div class="modal-footer">
          <button class="btn-secondary" id="btnCancelItem">Cancelar</button>
          <button class="btn-primary" id="btnSaveItem">Salvar</button>
        </div>
      </div>
    </div>

    <!-- MODAL: PROMO√á√ÉO -->
    <div class="modal-overlay" id="modalPromocao">
      <div class="modal-content">
        <div class="modal-header">
          <h3 class="modal-title">Gerenciar Promo√ß√£o</h3>
          <button class="btn-close" id="btnCloseModalPromocao">√ó</button>
        </div>
        <div class="modal-body">
          <form id="formPromocao" class="modal-form">
            <input type="hidden" id="promocaoItemId">
            <input type="hidden" id="promocaoPrecoOriginal">
          
            <div class="form-group">
              <label for="promocaoItemNome">Item</label>
              <input type="text" id="promocaoItemNome" disabled style="background: #f5f5f5; cursor: not-allowed;">
            </div>

            <div class="form-row">
              <div class="form-group">
                <label for="promocaoPrecoNormal">Pre√ßo Normal (R$)</label>
                <input type="number" id="promocaoPrecoNormal" disabled style="background: #f5f5f5; cursor: not-allowed;" step="0.01">
              </div>
              <div class="form-group">
                <label for="promocaoPrecoPromocional">Pre√ßo Promocional (R$) *</label>
                <input type="text" id="promocaoPrecoPromocional" required inputmode="decimal" placeholder="Ex.: 9,99">
                <small style="color: var(--text-muted);">Formato: use v√≠rgula. Ex.: 7,50</small>
              </div>
            </div>
          
            <div class="form-group">
              <label for="promocaoAtiva">Status da Promo√ß√£o</label>
              <select id="promocaoAtiva">
                <option value="false">Inativa</option>
                <option value="true">Ativa</option>
              </select>
            </div>
          
            <div class="form-row">
              <div class="form-group">
                <label for="promocaoInicio">Data/Hora In√≠cio *</label>
                <input type="datetime-local" id="promocaoInicio" required>
              </div>
              <div class="form-group">
                <label for="promocaoFim">Data/Hora Fim *</label>
                <input type="datetime-local" id="promocaoFim" required>
              </div>
            </div>
          
            <div class="form-group" style="background: #fff3cd; padding: 1rem; border-radius: 8px; border: 1px solid #ffc107;">
              <p style="margin: 0; color: #856404; font-size: 0.9rem;">
                ‚ö†Ô∏è O pre√ßo promocional deve ser menor que o pre√ßo normal (R$ <span id="precoNormalDisplay">0,00</span>)
              </p>
            </div>
          </form>
        </div>
        <div class="modal-footer">
          <button class="btn-secondary" id="btnRemoverPromocao" style="margin-right: auto;">üóëÔ∏è Remover Promo√ß√£o</button>
          <button class="btn-secondary" id="btnCancelPromocao">Cancelar</button>
          <button class="btn-primary" id="btnSavePromocao">Salvar Promo√ß√£o</button>
        </div>
      </div>
    </div>
          </div>
        </form>
      </div>
      <div class="modal-footer">
        <button class="btn-secondary" id="btnCancelItem">Cancelar</button>
        <button class="btn-primary" id="btnSaveItem">Salvar</button>
      </div>
    </div>
  </div>

  <!-- MODAL: ADMINISTRADOR -->
  <div class="modal-overlay" id="modalAdmin">
    <div class="modal-content">
      <div class="modal-header">
        <h3 class="modal-title" id="modalAdminTitle">Novo Administrador</h3>
        <button class="btn-close" id="btnCloseModalAdmin">√ó</button>
      </div>
      <div class="modal-body">
        <form id="formAdmin" class="modal-form">
          <input type="hidden" id="adminId">
          
          <div class="form-group">
            <label for="adminNome">Nome *</label>
            <input type="text" id="adminNome" required placeholder="Nome completo">
          </div>

          <div class="form-group">
            <label for="adminEmail">E-mail *</label>
            <input type="email" id="adminEmail" required placeholder="email@exemplo.com">
          </div>

          <div class="form-group" id="adminSenhaGroup">
            <label for="adminSenha">Senha *</label>
            <input type="password" id="adminSenha" required minlength="6" placeholder="M√≠nimo 6 caracteres">
          </div>

          <div class="form-group" id="adminConfirmSenhaGroup">
            <label for="adminConfirmSenha">Confirmar Senha *</label>
            <input type="password" id="adminConfirmSenha" required minlength="6" placeholder="Digite a senha novamente">
          </div>
        </form>
      </div>
      <div class="modal-footer">
        <button class="btn-secondary" id="btnCancelAdmin">Cancelar</button>
        <button class="btn-primary" id="btnSaveAdmin">Salvar</button>
      </div>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <script src="js/supabase-config.js"></script>
  <script src="js/admin-auth.js"></script>
  <script src="js/admin-cardapio.js"></script>
  <script src="js/admin-usuarios.js"></script>
</body>
</html>
